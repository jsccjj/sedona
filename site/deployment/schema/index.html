



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Online documentation for Sedona Framework(R)">
      
      
        <link rel="canonical" href="https://linsong.github.io/sedona/deployment/schema/">
      
      
        <meta name="author" content="Sedona Community">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../favicon.ico">
      <meta name="generator" content="mkdocs-1.1, mkdocs-material-4.6.3">
    
    
      
        <title>Schema - Sedona Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.adb8469c.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="#795548">
      
    
    
      <script src="../../assets/javascripts/modernizr.86422ebf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="brown" data-md-color-accent="red">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#schema" tabindex="0" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://linsong.github.io/sedona" title="Sedona Documentation" aria-label="Sedona Documentation" class="md-header-nav__button md-logo">
          
            <img alt="logo" src="../../favicon.ico" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Sedona Documentation
            </span>
            <span class="md-header-nav__topic">
              
                Schema
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" aria-label="search" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/linsong/sedona/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    linsong/sedona
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://linsong.github.io/sedona" title="Sedona Documentation" class="md-nav__button md-logo">
      
        <img alt="logo" src="../../favicon.ico" width="48" height="48">
      
    </a>
    Sedona Documentation
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/linsong/sedona/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    linsong/sedona
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Index" class="md-nav__link">
      Index
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Getting Started
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Getting Started
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../quickstart/intro/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../quickstart/setup/" title="Setup" class="md-nav__link">
      Setup
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../quickstart/architecture/" title="Architecture" class="md-nav__link">
      Architecture
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../quickstart/tutorial/" title="Tutorial" class="md-nav__link">
      Tutorial
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Language
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Language
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../language/lang/" title="Language" class="md-nav__link">
      Language
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../language/primitives/" title="Primitives" class="md-nav__link">
      Primitives
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../language/expr/" title="Expressions" class="md-nav__link">
      Expressions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../language/stmt/" title="Statements" class="md-nav__link">
      Statements
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../language/classes/" title="Classes" class="md-nav__link">
      Classes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../language/fields/" title="Fields" class="md-nav__link">
      Fields
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../language/methods/" title="Methods" class="md-nav__link">
      Methods
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../language/components/" title="Components" class="md-nav__link">
      Components
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../language/reflection/" title="Reflection" class="md-nav__link">
      Reflection
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../language/arrays/" title="Arrays" class="md-nav__link">
      Arrays
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../language/memory/" title="Memory" class="md-nav__link">
      Memory
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../language/nativeMethods/" title="Native Methods" class="md-nav__link">
      Native Methods
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../language/logging/" title="Logging" class="md-nav__link">
      Logging
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Apps
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Apps
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../apps/apps/" title="Application Model" class="md-nav__link">
      Application Model
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../apps/security/" title="Security" class="md-nav__link">
      Security
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" checked>
    
    <label class="md-nav__link" for="nav-5">
      Deployment
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Deployment
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../kits/" title="Kits" class="md-nav__link">
      Kits
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Schema
      </label>
    
    <a href="./" title="Schema" class="md-nav__link md-nav__link--active">
      Schema
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kit-parts" class="md-nav__link">
    Kit Parts
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kit-database" class="md-nav__link">
    Kit Database
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#manifest-database" class="md-nav__link">
    Manifest Database
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schemas" class="md-nav__link">
    Schemas
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kits-versus-manifests" class="md-nav__link">
    Kits versus Manifests
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resolving-manifests" class="md-nav__link">
    Resolving Manifests
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kit-manifest-server" class="md-nav__link">
    Kit Manifest Server
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#implementation-details" class="md-nav__link">
    Implementation Details
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#review" class="md-nav__link">
    Review
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Platforms
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Platforms
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../platforms/platDef/" title="Platform Definition" class="md-nav__link">
      Platform Definition
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../platforms/par/" title="Platform Archive" class="md-nav__link">
      Platform Archive
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../platforms/platTutorial/" title="Platform Tutorial" class="md-nav__link">
      Platform Tutorial
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../platforms/deviceSim/" title="Device Simulator" class="md-nav__link">
      Device Simulator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../platforms/platCertified/" title="Certified Platforms" class="md-nav__link">
      Certified Platforms
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Development
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Development
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../development/sedonac/" title="Sedonac" class="md-nav__link">
      Sedonac
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../development/testing/" title="Testing" class="md-nav__link">
      Testing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../development/porting/" title="Porting" class="md-nav__link">
      Porting
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../development/niagara/" title="Niagara" class="md-nav__link">
      Niagara
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Networking
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Networking
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../networking/networking/" title="Networking" class="md-nav__link">
      Networking
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../networking/dasp/" title="DASP" class="md-nav__link">
      DASP
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../networking/sox/" title="Sox" class="md-nav__link">
      Sox
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../networking/discover/" title="Device Discovery" class="md-nav__link">
      Device Discovery
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Appendix
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        Appendix
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../appendix/license/" title="License" class="md-nav__link">
      License
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../appendix/conventions/" title="Coding Conventions" class="md-nav__link">
      Coding Conventions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../appendix/scodeFormat/" title="SCode Format" class="md-nav__link">
      SCode Format
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../appendix/grammar/" title="Grammar" class="md-nav__link">
      Grammar
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      Releases
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        Releases
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../releases/newFor12/" title="v1.2" class="md-nav__link">
      v1.2
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../api/api/" title="API" class="md-nav__link">
      API
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kit-parts" class="md-nav__link">
    Kit Parts
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kit-database" class="md-nav__link">
    Kit Database
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#manifest-database" class="md-nav__link">
    Manifest Database
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schemas" class="md-nav__link">
    Schemas
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kits-versus-manifests" class="md-nav__link">
    Kits versus Manifests
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resolving-manifests" class="md-nav__link">
    Resolving Manifests
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kit-manifest-server" class="md-nav__link">
    Kit Manifest Server
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#implementation-details" class="md-nav__link">
    Implementation Details
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#review" class="md-nav__link">
    Review
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/linsong/sedona/edit/master/docs/deployment/schema.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <!--
[//]: # (Copyright &#169; 2007 Tridium, Inc
  Licensed under the Academic Free License version 3.0

  History:
    17 May 07  Brian Frank  Creation
) -->

<p><a href="/"><img alt="Sedona" src="../../logo.png" /></a></p>
<h1 id="schema">Schema<a class="headerlink" href="#schema" title="Permanent link">&para;</a></h1>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>Because the Sedona Framework is designed to work in very constrained
embedded environments, we have to make design tradeoffs. One of the
biggest tradeoffs is using a low level binary format for Sedona
Framework application files and the Sox protocol. This compact form
requires out-of-band information for encoding and decoding.</p>
<p>For example the binary format does not contain kit, type, or slot definitions, only their numeric ids. So in order to reconstruct the
original app from its binary SAB file, we must have some external way to
map those ids to the right definitions. Correct versioning is also
important, since kits may evolve over time to include new types and new
slots which could change their ids. The schema tells us how to create
the right mapping for the app, by specifying the kit versions and
checksums that were used to create the app.</p>
<h2 id="kit-parts">Kit Parts<a class="headerlink" href="#kit-parts" title="Permanent link">&para;</a></h2>
<p>Every kit contains zero or more named types. Each type declares zero or
more slots. For a given version of a kit, there is a fixed list of types
and their declared slots. Each slot has a fixed name, flags, and type.
When a kit is compiled from source into a kit zip file, the compiler
generates a <em>checksum</em> for this fixed list of types and slots. The
combination of a kit name and checksum is called a <em>kit part</em>.</p>
<p>The kit meta-data, checksum, and list of types and slots is included in
the kit file as an XML file called "manifest.xml". Here is an example
manifest file:</p>
<div class="codehilite"><pre><span></span><code>    <span class="cp">&lt;?xml version=&#39;1.0&#39;?&gt;</span>
    <span class="nt">&lt;kitManifest</span>
       <span class="na">name=</span><span class="s">&quot;sysTest&quot;</span>
       <span class="na">checksum=</span><span class="s">&quot;da52f78f&quot;</span>
       <span class="na">version=</span><span class="s">&quot;1.0&quot;</span>
       <span class="na">vendor=</span><span class="s">&quot;Tridium&quot;</span>
       <span class="na">description=</span><span class="s">&quot;Test suite for core language and sys APIs&quot;</span>
       <span class="na">buildHost=</span><span class="s">&quot;BLAZE&quot;</span>
       <span class="na">buildTime=</span><span class="s">&quot;2007-05-17T16:21:08.030-04:00&quot;</span>
    <span class="nt">&gt;</span>

    <span class="nt">&lt;type</span> <span class="na">id=</span><span class="s">&quot;0&quot;</span> <span class="na">name=</span><span class="s">&quot;AbstractTestComp&quot;</span> <span class="na">base=</span><span class="s">&quot;sys::Component&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;slot</span> <span class="na">id=</span><span class="s">&quot;0&quot;</span> <span class="na">name=</span><span class="s">&quot;az&quot;</span> <span class="na">type=</span><span class="s">&quot;bool&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;slot</span> <span class="na">id=</span><span class="s">&quot;1&quot;</span> <span class="na">name=</span><span class="s">&quot;ai&quot;</span> <span class="na">type=</span><span class="s">&quot;int&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/type&gt;</span>

    <span class="nt">&lt;type</span> <span class="na">id=</span><span class="s">&quot;1&quot;</span> <span class="na">name=</span><span class="s">&quot;TestComp&quot;</span> <span class="na">base=</span><span class="s">&quot;sysTest::AbstractTestComp&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;slot</span> <span class="na">id=</span><span class="s">&quot;0&quot;</span> <span class="na">name=</span><span class="s">&quot;z1&quot;</span> <span class="na">type=</span><span class="s">&quot;bool&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;slot</span> <span class="na">id=</span><span class="s">&quot;1&quot;</span> <span class="na">name=</span><span class="s">&quot;b1&quot;</span> <span class="na">type=</span><span class="s">&quot;byte&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;slot</span> <span class="na">id=</span><span class="s">&quot;2&quot;</span> <span class="na">name=</span><span class="s">&quot;addF1&quot;</span> <span class="na">type=</span><span class="s">&quot;float&quot;</span> <span class="na">flags=</span><span class="s">&quot;a&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/type&gt;</span>

    <span class="nt">&lt;type</span> <span class="na">id=</span><span class="s">&quot;2&quot;</span> <span class="na">name=</span><span class="s">&quot;SubTestComp&quot;</span> <span class="na">base=</span><span class="s">&quot;sysTest::TestComp&quot;</span><span class="nt">&gt;</span>
      <span class="nt">&lt;slot</span> <span class="na">id=</span><span class="s">&quot;0&quot;</span> <span class="na">name=</span><span class="s">&quot;sb&quot;</span> <span class="na">type=</span><span class="s">&quot;byte&quot;</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;slot</span> <span class="na">id=</span><span class="s">&quot;1&quot;</span> <span class="na">name=</span><span class="s">&quot;si&quot;</span> <span class="na">type=</span><span class="s">&quot;int&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/type&gt;</span>

    <span class="nt">&lt;/kitManifest&gt;</span>
</code></pre></div>

<p>The checksum is based only on the kit's component types (those that
subclass <code>sys::Component</code>) and slots. The checksum is not based on
variable meta-data such as the kit's version number, or on
non-component types which could never appear in an app definition. This
means that multiple versions of the same kit might share the same
checksum if no component types or slots have been modified between
versions.</p>
<p>Don't confuse <strong>version</strong> with <strong>checksum</strong>. Version represents a
revision of the whole kit including its code, algorithms, and when it
was built; the version only changes when the developer <em>chooses</em> to
specify a different version number. Checksum represents a revision of
the declared types and slots, and it changes <em>automatically</em> whenever
the type or slot definitions change.</p>
<h2 id="kit-database">Kit Database<a class="headerlink" href="#kit-database" title="Permanent link">&para;</a></h2>
<p>Within a Sedona Framework installation we store all the local copies of
kits with the file pattern:
<code>{Sedona home}/kits/{kit}/{kit}-{checksum}-{version}.kit</code> For example:</p>
<div class="codehilite"><pre><span></span><code>{Sedona home}/
  kits/
    control/
      control-cdf5f0f0-1.0.28.kit
      control-cdf5f0f0-1.0.29.kit
      control-1239c0de-1.0.29.kit

    sys/
      sys-ef94b11d-1.0.28.kit
    .
    .
    .
</code></pre></div>


<p>We call this directory the <em>kit database</em>. It can store multiple
versions of each kit with different checksums. The <code>sedona.kit.*</code> Java
APIs can be used to work with the kit database.</p>
<h2 id="manifest-database">Manifest Database<a class="headerlink" href="#manifest-database" title="Permanent link">&para;</a></h2>
<p>Kit files contain all the information we need when working with schema.
However, to interface with a device that is using a kit we don't need
the full kit file, only the XML manifest file that represents it. So in
addition to the kit database, we also create a <em>manifest database</em> with
the file pattern: <code>{Sedona home}/manifests/{kit}/{kit}-{checksum}.xml</code>
For example:</p>
<div class="codehilite"><pre><span></span><code>{Sedona home}/
  manifests/
    control/
      control-cdf5f0f0.xml
      control-1239c0de.xml

    sys/
      sys-ef94b11d.xml
    .
    .
    .
</code></pre></div>


<p>By storing the manifests in a separate database, we don't need to use
the kit files themselves to work with the kits' types. This is
typically more efficient, and in addition it allows a vendor to publish
just the manifests for their kits as opposed to entire kit files.</p>
<p>Note, however, that manifests cannot be used to create an SCode image.
Building an SCode image requires access to the actual kit files.</p>
<p>The <code>sedona.manifest.*</code> APIs are used to work with manifests and the
manifest database via the Java toolkit. The <code>KitManifest</code> class
represents the information stored a kit manifest file and provides
methods for encoding and decoding from XML. The <code>ManifestDb</code> class is
used to load and save <code>KitManifest</code>s to the file system.</p>
<h2 id="schemas">Schemas<a class="headerlink" href="#schemas" title="Permanent link">&para;</a></h2>
<p>A Sedona Framework application is composed of multiple kits. A specific
list of kit parts (kits at a specific checksum revision) is called a
<em>schema</em>. Matching schemas guarantee compatibility between the app
running on the device and the app's representation elsewhere, such as
in a PC-based tool.</p>
<p>Only when a kit manifest is accessed for a specific schema can we
correctly interpret binary information such as kit id and slot id. For
example the kit id for the "control" kit might be 3 in one schema, but
5 in another schema that has a different list of kit parts. Slot ids for
a given kit part can also change across schemas, if there are changes to
slots inherited from base types.</p>
<p>The Java API for working with schemas is in <code>sedona.*</code>. Schemas are
built with the <code>sedona.Schema</code> class from a list of <code>KitParts</code> which are
resolved against the manifest database. Assuming all the kit parts can
be resolved to kit manifests, we can build a complete representation of
the schema including the full list of kits, types, and slots along with
their respective ids. The <code>Schema</code> is then used to work with binary
formats such as ".sab" files and Sox messages.</p>
<h2 id="kits-versus-manifests">Kits versus Manifests<a class="headerlink" href="#kits-versus-manifests" title="Permanent link">&para;</a></h2>
<p>So when do you need a kit and when do you only need a manifest? This
table helps summarize the differences:</p>
<table>
<thead>
<tr>
<th>What</th>
<th>Encapsulates</th>
<th>Versioned By</th>
<th>Uses</th>
</tr>
</thead>
<tbody>
<tr>
<td>Manifest</td>
<td>type and slot schema</td>
<td>checksum</td>
<td>sax, sab, and sox</td>
</tr>
<tr>
<td>Kit</td>
<td>code</td>
<td>version number</td>
<td>compiling dependencies and scode images</td>
</tr>
</tbody>
</table>
<p>For example when working with an application file or Sox, only the type
schemas are needed. No knowledge of the internal code is required.
However when compiling, you need the full kit that contains the actual
code. So a manifest is somewhat analogous to a C header file, which
declares function prototypes but does not contain any code for the
functions.</p>
<p>Manifests are versioned with a checksum each time a type or slot
definition is modified. Kits are versioned with a version number
typically whenever code is modified.</p>
<h2 id="resolving-manifests">Resolving Manifests<a class="headerlink" href="#resolving-manifests" title="Permanent link">&para;</a></h2>
<p>To fully connect to a remote Sedona device, there must be local copies
of the kit manifests corresponding to the device's current schema. The
recommended rules for locating each kit manifest are:</p>
<ol>
<li>Check the local manifest database first; if the manifest is found
    then use it</li>
<li>Check the local kit database for the given kit, if found then
    extract the manifest file and store it in the local manifest
    database</li>
<li>Download the manifest from sedonadev.org to the local manifest
    database</li>
</ol>
<p>These steps are automatically implemented by the Sedona <code>ManifestDb</code>
API. If any manifests required by the schema are not found a
<code>MissingKitManifestException</code> is thrown, which contains information
about the specific manifests that are missing. This information can be
used to compose a friendly error message to the user about why the
connection failed, or to request the missing file(s) from the device
itself (see next section).</p>
<h2 id="kit-manifest-server">Kit Manifest Server<a class="headerlink" href="#kit-manifest-server" title="Permanent link">&para;</a></h2>
<p>Beginning with Sedona 1.2, the Sedona Sox Client supports retrieving
missing manifest files from the remote Sedona device itself. If it
detects the <code>MissingKitManifestException</code> when resolving the device's
schema locally, it requests the missing manifests from the device. If
the device is set up to serve the requested manifests it will send them.
This feature can make it easier to deploy new devices, as they can be
shipped with the necessary manifests installed on the device rather than
requiring them to be installed separately in advance on the Sox Client
host.</p>
<p>Serving kit manifests is accomplished very simply, using a special
filename prefix called a <em>scheme</em> to indicate to the device where to
look for the file in its local file system. This allows the manifest
retrieval to be accomplished using the regular Sox file transfer
protocol. When the Sox Client detects that a manifest is not found by
the usual rules described above, it sends a Sox "get file" request to
the device using the filename of the missing manifest adding the
appropriate scheme prefix. When the device receives the request, it
recognizes by the prefix that this is a manifest file, and looks in its
local database for the one requested. If the file is found, it sends it
via Sox back to the requesting client.</p>
<h3 id="implementation-details">Implementation Details<a class="headerlink" href="#implementation-details" title="Permanent link">&para;</a></h3>
<p>To make this feature work on a given Sedona platform, the following
things must be true:</p>
<ul>
<li>The required manifest file(s) must be stored on the device</li>
<li>The "<strong>m:</strong>" scheme must be implemented on the remote Sedona
    device (see below)</li>
<li>The <code>sedonadev.autodownload</code> property in sedona.properties must be
    set to false, or omitted entirely</li>
</ul>
<p>A <em>scheme</em> is simply a prefix to the filename, such as "m:", which is
translated on the remote device into a local path where the file should
be located. There are two ways to implement a scheme:</p>
<ol>
<li>It can be implemented entirely at the native level, encapsulated in
    the appropriate <code>sys::FileStore</code> natives</li>
<li>It can be implemented at the Sedona level using a platform-specific
    FileStore subclass.</li>
</ol>
<p>If it is implemented at the native level, then at the Sedona level the
device treats the prefix as part of the actual filename. The native
implementation of <code>FileStore.doOpen()</code> must then strip off the prefix
and substitute the path to the local manifest database. The resulting
full path to the file is then passed to the local file system and
handled just like any other file transfer request.</p>
<p>If it is implemented using a FileStore subclass, then the FileStore
subclass should override the <code>accept()</code> method such that it returns true
if the filename begins with the desired prefix. Then the <code>open()</code> method
can be overridden to strip off the scheme prefix and substitute the
desired path, or the FileStore subclass may have an additional native
method that provides the appropriate path for all files in that scheme.</p>
<p>The Sedona 1.2 open source includes a class in the 'win32' platform
kit, called <code>Win32ProvDbFileStore</code>. This class demonstrates the second
(Sedona-level) implementation strategy described above.</p>
<p>N.B. An ambitious Sedona developer could use this same strategy to
provide kit files and/or platform manifests as well as kit manifests.</p>
<h2 id="review">Review<a class="headerlink" href="#review" title="Permanent link">&para;</a></h2>
<p>To summarize the schema pipeline:</p>
<ol>
<li><strong>Checksum</strong>: Generated by the compiler when compiling a kit file
    from source, the checksum is based on the declared types and slots
    in the kit.</li>
<li><strong>Kit Part</strong>: The combination of kit name and kit checksum that
    uniquely identifies a kit for a specific schema revision.</li>
<li><strong>Kit Manifest</strong>: A file containing a kit's checksum and type
    definitions, stored as a zip archive entry named "manifest.xml".</li>
<li><strong>Kit Database</strong>: A local database of kit versions, created and
    maintained by the Sedona Framework Java toolkit.</li>
<li><strong>Manifest Database</strong>: A local database of all the kit manifests
    that have been accumulated, created, and maintained by the Sedona
    Framework Java toolkit. These manifests are XML files keyed by kit
    name and checksum.</li>
<li><strong>Schema</strong>: A list of kit parts aggregated by the Sedona Framework
    Java toolkit. A schema defines the full meta-data required to work
    with binary format entities with matching schemas. Each Sedona
    Framework runtime and application file has a single, fixed schema.
    The Java toolkit models schemas via the <code>sedona.Schema</code> API.</li>
</ol>
                
                  
                
                
                  
                  <hr>
                  <div class="md-source-date">
                    <small>
                      
                        Last update: April 28, 2020
                      
                    </small>
                  </div>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../kits/" title="Kits" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Kits
              </span>
            </div>
          </a>
        
        
          <a href="../../platforms/platDef/" title="Platform Definition" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Platform Definition
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2007-2017 Tridium, 2018-2020 Sedona Community
          </div>
        
        powered by
        <a href="https://www.mkdocs.org" target="_blank" rel="noopener">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.c33a9706.js"></script>
      
      <script>app.initialize({version:"1.1",url:{base:"../.."}})</script>
      
    
  </body>
</html>